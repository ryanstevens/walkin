{% extends '/base.html' %}

{% block body %}
  <div class="container">
    <fieldset>
      <label for="song-name">Artist - Song Name</label>
      <input id="song-name" type="text" placeholder="Rick Astley - Never Gonna Give You Up">

      <label for="start-time">Start Time (in Seconds)</label>
      <input id="start-time" type="text" placeholder="32">

      <label for="room">Room</label>
      <select id="room">
        <option>Some Room</option>
        <option>Some Other Room</option>
      </select>

      <label for="submit">Walk Up!</label>
      <button id="submit" class="btn btn-primary walkup">Walk Up</button>
    </fieldset>
  </div>
{% endblock %}


{% block js_body_page %}
  <script>
  var song = null;

  $.ajax({
    url : '/ajax/getSongs'
  }).done(function(result) {
    if (result.value) {
      song = result.value[0];
    }
    console.log(result);
  });

  $('#submit').click(function() {

    var songToUpdate = {
      "name" : "josh's song"
    };

    if (song) songToUpdate.id = song.objectId;

    $.ajax({
      url : '/ajax/saveSong',
      data : {
        obj : JSON.stringify(songToUpdate)
      }
    })
  });
  </script>
{% endblock %}

